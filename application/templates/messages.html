<div class="row">
  <div class="col s12 offset-m2 m8 card center-align">
    <form id="more-message-form" method="post" action="{{ url_for('more_message') }}" accept-charset="utf-8" data-pjax>
      {{ form.hidden_tag() }}
      <div class="card-content"><span class="card-title pink-text text-accent-4">想看看哪個系？</span></div>

      <div class="row">
        <div class="input-field col s6">
          <select class="_browser-default" name="department">
            <option value="" disabled selected>系別</option>
            {% for subfield in form.department %}
            {{ subfield }}
            {% endfor %}
          </select>
        </div>
        <button class="btn waves-effect waves-light" type="submit" name="action">送出<i class="mdi-content-send right"></i></button>
      </div>
    </form>



  </div>
  <div class="col s12 offset-m2 m8">
    <ul class="collapsible" data-collapsible="accordion">
      <li class="collection-header" style="">
        <div id="n" class="collapsible-header">
        {% if messages %}
        {{ messages[0].department }}
        {% else %}
        查詢結果
        {% endif %}
        </div>
        <div class="collapsible-body" style="background:#ddd">
          <table><tbody id="column">
            {% for m in messages %}
            <tr><td>{{ m.description|e }} | {{ m.grade }} 級</td></tr>
            {% endfor %}
          </tbody></table>
        </div>
      </li>
    </ul>
  </div>
</div>


<script>
  $(document).ready(function(){
    $('.collapsible').collapsible({
      accordion : false
    });

    // $('#more-message-form').on('submit', 'form[data-pjax]', function(event) {
    //   $.pjax.submit(event, '#pjax-container');
    // });

    $('select').material_select();
  });
</script>
