<style media="screen">
.hidden { display: none; }
.item{
  box-shadow: 4px 6px 17px 0px rgba(111, 185, 173, 0.75);;
  max-width: 300px;
  max-height: 300px;
}
.card-image .album span {
  font-size: 3em;
  font-weight: 500;
}
#ages .col { padding: 0; }
#ages .card {
  background-color: #000;
  border-top:7px solid;
  border-right:7px solid;
  border-left:7px solid;
}
#ages .card img { height: 250px; }
</style>

<div class="container row" style="padding-top:20px;">
  <div style="row">
    <div class="col s8">
      <h3 class="pink-text text-accent-5" style="font-family:'標楷體' !important">梅竹回憶</h3>
      <h6 class="pink-text text-accent-2" style="font-family:'標楷體' !important">還記得那加油到喉嚨沙啞的青春歲月嗎?讓這些珍貴的照片帶我們走進回憶的長廊…</h6>
    </div>
    <img class="col s4" src="static/img/banner.png" width="20%">
  </div>

  <div class="col s12">
    <select>
      <option value="" disabled selected>年份選擇</option>
      <option value="1969">1969</option>
      <option value="1970">1970</option>
      <option value="1971">1971</option>
      <option value="1972">1972</option>
      <option value="1973">1973</option>
      <option value="1975">1975</option>
      <option value="1976">1976</option>
      <option value="1977">1977</option>
      <option value="1978">1978</option>
      <option value="1981">1981</option>
      <option value="1982">1982</option>
      <option value="1988">1988</option>
      <option value="1989">1989</option>
      <option value="1990">1990</option>
      <option value="1992">1992</option>
      <option value="1999">1999</option>
      <option value="2007">2007</option>
      <option value="2008">2008</option>
      <option value="2012">2009</option>
    </select>
  </div>
</div>

<div class="section white">
  <div id="wban" class="row">
    <div id="prev" class="hidden" style="padding:20px;">
      <a class="btn-floating btn-large waves-effect waves-light orange left"><i class="mdi-hardware-keyboard-arrow-left"></i></a>
    </div>
    <div id="ages" class="col s12 offset-m1 m10">
      <div class="col s6 m4 center">
        <div class="card">
          <div class="card-image">
            <a href="#60_70" class="album">
              <img src="https://lh4.googleusercontent.com/-UEXecfB8s04/VN6vJ7vWIPI/AAAAAAAAAPA/DOcWX_FJL5s/s400/306-1970-003-003.jpg">
              <span class="card-title pink-text text-accent-4">'60 & 70</span>
            </a>
          </div>
        </div>
      </div>

      <div class="col s6 m4">
        <div class="card">
          <div class="card-image">
            <a href="#80" class="album">
              <img src="https://lh4.googleusercontent.com/-4PcgO7wSV5Q/VN7mcnuvn1I/AAAAAAAAAnU/FZ11j5j9vEs/s640/306-1989-003-431.jpg">
              <span class="card-title pink-text text-accent-4">'80</span>
            </a>
          </div>
        </div>
      </div>

      <div class="col s6 m4">
        <div class="card">
          <div class="card-image">
            <a href="#90" class="album">
              <img src="https://lh6.googleusercontent.com/-HvayzMFvVmI/VNRNQJ7JTvI/AAAAAAAAABE/HOjMOv2a2DE/23919_79f6d1a5.jpg">
              <span class="card-title pink-text text-accent-4">'90</span>
            </a>
          </div>
        </div>
      </div>

      <div class="col s6 offset-m2 m4">
        <div class="card">
          <div class="card-image">
            <a href="#00" class="album">
              <img src="https://lh6.googleusercontent.com/-HvayzMFvVmI/VNRNQJ7JTvI/AAAAAAAAABE/HOjMOv2a2DE/23919_79f6d1a5.jpg">
              <span class="card-title pink-text text-accent-4">'00</span>
            </a>
          </div>
        </div>
      </div>

      <div class="col s6 m4">
        <div class="card">
          <div class="card-image">
            <a href="#10" class="album">
              <img src="https://lh6.googleusercontent.com/-HvayzMFvVmI/VNRNQJ7JTvI/AAAAAAAAABE/HOjMOv2a2DE/23919_79f6d1a5.jpg">
              <span class="card-title pink-text text-accent-4">'10</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Result -->
  <div id="mgallery" class="col s12 center">
    <h3 class="pink-text text-accent-5" id="mgtitle"></h3>
    <div id="output"></div>
  </div>
</div>

  <div id="years" class="row">
    <div id="60_70" class="col s12 offset-m2 m8 hidden">
      <ul class="collection with-header">
        <li class="collection-header purple-text"><h4>'60 & 70年</h4></li>
        <a href="#1969" class="collection-item purple-text text-lighten-2">1969</a>
        <a href="#1970" class="collection-item purple-text text-lighten-2">1970</a>
        <a href="#1971" class="collection-item purple-text text-lighten-2">1971</a>
        <a href="#1972" class="collection-item purple-text text-lighten-2">1972</a>
        <a href="#1973" class="collection-item purple-text text-lighten-2">1973</a>
        <a href="#1975" class="collection-item purple-text text-lighten-2">1975</a>
        <a href="#1976" class="collection-item purple-text text-lighten-2">1976</a>
        <a href="#1977" class="collection-item purple-text text-lighten-2">1977</a>
        <a href="#1978" class="collection-item purple-text text-lighten-2">1978</a>
      </ul>
    </div>
    <div id="80" class="col s12 offset-m2 m8 hidden">
      <ul class="collection with-header">
        <li class="collection-header purple-text"><h4>'80年</h4></li>
        <a href="#1981" class="collection-item purple-text text-lighten-2">1981</a>
        <a href="#1982" class="collection-item purple-text text-lighten-2">1982</a>
        <a href="#1988" class="collection-item purple-text text-lighten-2">1988</a>
        <a href="#1989" class="collection-item purple-text text-lighten-2">1989</a>
      </ul>
    </div>
    <div id="90" class="col s12 offset-m2 m8 hidden">
      <ul class="collection with-header">
        <li class="collection-header purple-text"><h4>'90年</h4></li>
        <a href="#1990" class="collection-item purple-text text-lighten-2">1990</a>
        <a href="#1992" class="collection-item purple-text text-lighten-2">1992</a>
        <a href="#1999" class="collection-item purple-text text-lighten-2">1999</a>
      </ul>
    </div>
    <div id="00" class="col s12 offset-m2 m8 hidden">
      <ul class="collection with-header">
        <li class="collection-header purple-text"><h4>'00年</h4></li>
        <a href="#2007" class="collection-item purple-text text-lighten-2">2007</a>
        <a href="#2008" class="collection-item purple-text text-lighten-2">2008</a>
        <a href="#2009" class="collection-item purple-text text-lighten-2">2009</a>
      </ul>
    </div>
    <div id="10" class="col s12 offset-m2 m8 hidden">
      <ul class="collection with-header">
        <li class="collection-header purple-text"><h4>'10年</h4></li>
        <a href="#2012" class="collection-item purple-text text-lighten-2">2012</a>
      </ul>
    </div>
  </div>


</div>

{% raw %}
<script id="template" type="text/x-jquery-template">
  <div id="photo">
    <div id="_container">
    {{each photos}}
    <img class="item" src="${src}" alt="" />
    {{/each}}
    </div>
  </div>
</script>
{% endraw %}

<script>
$(function(){
  var constlink = 'https://picasaweb.google.com/data/feed/base/user/103449317412346247800/albumid/'
  var albums = {
    '1969': '6115496034485822385',
    '1970': '6115502173943410689',
    '1971': '6115503317310606241',
    '1972': '6115504235220673841',
    '1973': '6115506182180003137',
    '1975': '6115506928939082833',
    '1976': '6115510751956878289',
    '1977': '6115511054288229457',
    '1978': '6115511493447131809',
    '1981': '6115518709885777409',
    '1982': '6115524022506529521',
    '1988': '6115533013087571905',
    '1989': '6115560878644093121',
    '1990': '6115598401609043777',
    '1992': '6115600686302924257',
    '1999': '6115603458678277489',
    '2007': '6115603405518471441',
    '2008': '6115607633801282337',
    '2009': '6115610683922994145',
  }
  $('select').material_select();
  $('select').change(function () {
    var str = $("select option:selected").text();
    var val = $("select option:selected").attr('value');
    displayphoto(albums[val], val);
  });
  $('.collection-item').click(function () {
    var val = $(this).attr('href').slice(1, 5);
    displayphoto(albums[val], val);
  });
  $('.album').click(function(){
    target = $(this).attr('href');
    $('#ages')
      .addClass('animated bounceOutLeft')
      .one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function() {
        $('#ages').addClass('hidden');
        $('#prev').removeClass('hidden');
        $('#prev').attr('databt', target);
        $(target).detach().appendTo('#wban');
        $(target).removeClass('animated fadeOut');
        $(target).addClass('animated fadeIn');
        $(target).removeClass('hidden');
      });
    return false;
  });
  $('#prev').click(function(){
    target = $(this).attr('databt');
    $(target).addClass('hidden');
    $('#prev').addClass('hidden');
    $('#ages').removeClass('hidden');
    $('#ages')
      .removeClass('animated bounceOutLeft')
      .addClass('animated bounceInLeft')
      .one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function() {
        $(target).detach().appendTo('#years');
        $(target).addClass('animated fadeOut');
      });
    return false;
  });

  function displayphoto(albumid, val) {
    $('#mgtitle').text(val + '梅竹照片集')
    getalbum(constlink + albumid, val);
    $('html, body').animate({
        scrollTop: $("#mgallery").offset().top
    }, 2000);
  }

  function getalbum(url) {
    $.ajax({
        dataType: 'jsonp',
        url: url,
        data: {
            alt: 'json-in-script',
        },
        jsonpCallback: 'picasaCallback',
        success: function(data){
            var photos = [];
            $.each(data.feed.entry, function(){
                photos.push({
                    src: this.content.src
                });
            });
            $('#output').empty();
            $('#template').tmpl({
                photos: photos,
            }).appendTo('#output');
        },
        error: function(){
        }
    });
  }
});
</script>
<script>
  var $container = $('#_container');
  $container.imagesLoaded( function() {
    // $('.materialboxed').materialbox();
    $container.masonry({
      itemSelector: '.item',
      columWidth: 200,
      isAnimated: true
    });
  });
</script>
